
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_LayoutA.cshtml";
}

<div class="content-wrapper">
    <span class="d-none" id="messageBox"></span>
    <br />
    <div class="row">
        <div class="col-12">
            <h2 class="text-primary text-center">Contact Us List</h2>
        </div>
    </div>

    <br />

    <div class="p-4 border rounded row  bg-white">
        <div class="col-12 row">
            <div class="col-md-4 mt-2" style="display:none">
                <select class="form-control" id="activeId">
                    <option disabled selected value="">--Select Status--</option>
                    <option value="Active">Active</option>
                    <option value="InActive">InActive</option>
                </select>
            </div>

            <div class="col-md-2 mt-2">
                <button type="button" id="clearBtn" class="btn btn-primary form-control">Refresh</button>
            </div>
            <div class="col-md-2 mt-2">
                <button type="button" id="addBtn" class="btn btn-primary form-control" style="display:none"><i class="fa fa-plus"></i> Add</button>
            </div>
        </div>
        <div class="col-12 mt-2 table-responsive">
            <table id="tblData" class="table table-striped table-bordered" style="width:100%">
                <thead class="thead-light">
                    <tr class="table-info">
                        <th>SL</th>
                        <th>Student Name</th>
                        <th>Phone Number</th>
                        <th>Email</th>
                        <th>Task Image</th>
                        <th>Teacher Name</th>
                        <th>Solution Image</th>
                        <th>GetDateby</th>
                        <th></th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
</div>


<div class="row">
    <div class="col-12 row">
        <div class="modal fade ml-3 col-12" id="myModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-md">
                <div class="modal-content row" id="modalContent">
                </div>
            </div>
        </div>
    </div>
    <div class="col-12 row">
        <div class="modal fade col-12" id="addModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-md">
                <div class="modal-content row" id="addContent">
                </div>
            </div>
        </div>
    </div>
    <div class="col-12 row">
        <div class="modal fade col-12" id="permissionModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content row" id="permissionContent">
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
    var dataTable;
    $(document).ready(function () {
        loadDataTable();
        var text = $("#messageBox").text();
        if (text != "") {
            toastr.success(text);
        }
    });

    var i = 1;
    function loadDataTable() {
        dataTable = $("#tblData").DataTable({
            "ajax": {
                "url": "/ClaimTask/GetAllContact",
                "type": "GET",
                "datatype": "json"
            },
            "columns": [
                {
                    data: 'SrNo',
                    render: function (data, type, row, meta) {
                        return meta.row + 1;
                    }
                },
                { "data": "studentName", "width": "10%" },
                { "data": "phoneNumber", "width": "10%" },
                { "data": "email", "width": "10%" },
                { "data": "taskImage", "width": "10%" },
                { "data": "teacherName", "width": "10%" },
                { "data": "solutionImage", "width": "10%" },
                { "data": "getDateby", "width": "10%" },
                {
                    "data": "id",
                    "render": function (data) {
                        return `<div class="text-center">
                                                        <button type="button" class="btn btn-success modalBtn" data-id="${data}" ><i class="fas fa-edit"></i></button>
                                                        <button type="button" class="btn btn-danger deleteBtn" data-id="${data}" ><i class="fas fa-trash"></i></button>
                                                        <button type="button" class="btn btn-primary permissionBtn" data-id="${data}" ><i class="fas fa-plus"></i></button>
                                                    </div>`;
                    }, "width": "30%"
                }
            ]
        });
    }



    $("#clearBtn").click(function () {
        $('#activeId').val('');
        dataTable
            .search('')
            .columns().search('')
            .draw();
    })

    $('#activeId').on('change', function () {
        var brandFilter = $('#activeId').val();
        dataTable
            .column(2) // Assuming name is in the second column
            .search(brandFilter)
            .draw();
    });

    </script>
}